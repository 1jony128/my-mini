# Деплой на Timeweb Cloud

## Важные ограничения

Timeweb Cloud Apps поддерживает только **статическую генерацию (SSG)** для Next.js приложений. Это означает:

1. **API роуты не работают** - все `/api/*` эндпоинты недоступны
2. **SSR недоступен** - серверный рендеринг невозможен
3. **Динамические роуты** должны быть предварительно сгенерированы

## Решение для API

Поскольку API роуты не работают в статическом режиме, необходимо:

1. **Вынести API на отдельный сервер** (например, Vercel, Railway, или собственный VPS)
2. **Использовать Edge Functions** в Supabase для API логики
3. **Настроить CORS** для взаимодействия между статическим сайтом и API

## Рекомендуемая архитектура

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Timeweb Cloud │    │   API Server    │    │   Supabase      │
│   (Static Site) │◄──►│   (Vercel/etc)  │◄──►│   (Database)    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## Настройка для деплоя

1. **Создайте отдельный репозиторий для API** с роутами `/api/*`
2. **Деплойте API на Vercel** или другой платформе
3. **Обновите переменные окружения** в статическом приложении
4. **Настройте CORS** на API сервере

## Команды для Timeweb Cloud

```bash
# Команда сборки
npm run build

# Директория сборки
out/

# Зависимости
npm install
```

## Переменные окружения

Создайте файл `.env.local` с настройками API:

```env
NEXT_PUBLIC_API_URL=https://your-api-domain.vercel.app
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
```

## Альтернативное решение

Если нужен полный функционал с API, используйте **Docker деплой** вместо Apps:

1. Создайте `Dockerfile`
2. Выберите "Деплой из Dockerfile" в Timeweb Cloud
3. Настройте контейнер с полным Next.js приложением
